{"version":3,"file":"check_value.min.js","sources":["../src/check_value.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This is plugin test.\n *\n * @module    mod_plugintest\n * @class     check_value\n * @copyright 2023 The Open University\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {call as fetchMany} from 'core/ajax';\nimport * as FormEvents from 'core_form/events';\n\n/**\n * Validation for expression.\n */\nconst check_value = () => {\n    const inputs = document.querySelectorAll('textarea[name*=\"limit\"]');\n    inputs.forEach(input => {\n        input.addEventListener('blur', function(e) {\n            const promises = fetchMany([{\n                methodname: 'webservice_call_test',\n                args: {\n                    input: e.target.value,\n                }\n            }]);\n            promises[0].then(function(data) {\n                FormEvents.notifyFieldValidationFailure(e.target, data.message);\n            }).fail(function(err) {\n                window.console.error('Log request failed ' + err.message);\n            });\n        });\n    });\n    const option = document.querySelectorAll('textarea[name*=\"option\"]');\n    option.forEach(option => {\n        option.addEventListener('blur', function(e) {\n            const promises = fetchMany([{\n                methodname: 'webservice_call_test',\n                args: {\n                    input: e.target.value,\n                }\n            }]);\n            promises[0].then(function(data) {\n                FormEvents.notifyFieldValidationFailure(e.target, data.message);\n            }).fail(function(err) {\n                window.console.error('Log request failed ' + err.message);\n            });\n        });\n    });\n    const timelimit = document.getElementById('id_timelimit_number');\n    timelimit.addEventListener('blur', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n    const textfield = document.getElementById('id_fieldtext');\n    textfield.addEventListener('blur', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    const mutiselect = document.getElementById('id_multi-select');\n    mutiselect.addEventListener('blur', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    const datepickerday = document.getElementById('id_datepicker_day');\n    const datepickermonth = document.getElementById('id_datepicker_month');\n    const datepickeryear = document.getElementById('id_datepicker_year');\n    datepickerday.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    datepickermonth.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    datepickeryear.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    const datetimeslectorday = document.getElementById('id_date-time-selector_day');\n    const datetimeslectormonth = document.getElementById('id_date-time-selector_month');\n    const datetimeslectoryear = document.getElementById('id_date-time-selector_year');\n    datetimeslectorday.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    datetimeslectormonth.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n    datetimeslectoryear.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n\n\n    const slectyesno =document.getElementById('id_selectyesno');\n    slectyesno.addEventListener('change', function(e) {\n        const promises = fetchMany([{\n            methodname: 'webservice_call_test',\n            args: {\n                input: e.target.value,\n            }\n        }]);\n        promises[0].then(function(data) {\n            FormEvents.notifyFieldValidationFailure(e.target, data.message);\n        }).fail(function(err) {\n            window.console.error('Log request failed ' + err.message);\n        });\n    });\n};\n\nexport const init = () => {\n    check_value();\n};"],"names":["document","querySelectorAll","forEach","input","addEventListener","e","methodname","args","target","value","then","data","FormEvents","notifyFieldValidationFailure","message","fail","err","window","console","error","option","getElementById","datepickerday","datepickermonth","datepickeryear","datetimeslectorday","datetimeslectormonth","datetimeslectoryear","check_value"],"mappings":"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"}